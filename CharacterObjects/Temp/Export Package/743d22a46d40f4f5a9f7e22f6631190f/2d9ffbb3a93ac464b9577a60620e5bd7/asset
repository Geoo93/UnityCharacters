using System.IO;
using UnityEngine;
using System.Linq;
using System.Collections;
using System.Collections.Generic;
 
public class ShowFPS : MonoBehaviour
{
    private List<float> fpsHistory = new List<float>();
        
    void Start() {
                fpsHistory.Add(0);
        StartCoroutine("CalcFPS");
    }
        
    IEnumerator CalcFPS()
        {
                var stopwatch = new System.Diagnostics.Stopwatch();
                stopwatch.Start();
                
        while (true) 
                {
                        yield return new WaitForEndOfFrame();
                        
                        fpsHistory.Add(1000.0f / stopwatch.ElapsedMilliseconds);
                        stopwatch.Reset();
                        stopwatch.Start();
                        if (fpsHistory.Count > 100)
                                fpsHistory.RemoveAt(0);
                }    
    }
        
        void OnGUI()
        {
                GUI.Label(new Rect(10, Screen.height-20, 120, 20), "FPS: " + fpsHistory.Average().ToString("f2"));
        }
}